#!/bin/bash

if command -v nvim &> /dev/null; then
    nvim "$@"
    exit
fi

if command -v condatainer &> /dev/null; then
    if ! condatainer ls -e nvim > /dev/null; then
        echo creating condatainer 'nvim'...
        condatainer create -n nvim nvim nodejs
    fi
    condatainer exec -o nvim nvim "$@"
    if [ $? -ne 0 ]; then
        /bin/vim "$@"
    fi
else
    /bin/vim "$@"
fi
